<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Qt Toolkit - QFile Class</title><style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }body { background: white; color: black; }
--></style>
</head><body bgcolor="#ffffff">

<table width="100%">
<tr><td><a href="index.html">
<img width="100" height="100" src="qtlogo.png"
alt="Home" border="0"><img width="100"
height="100" src="face.png" alt="Home" border="0">
</a><td valign=top><div align=right><img src="dochead.png" width="472" height="27"><br>
<a href="classes.html"><b>Classes</b></a>
- <a href="annotated.html">Annotated</a>
- <a href="hierarchy.html">Tree</a>
- <a href="functions.html">Functions</a>
- <a href="index.html">Home</a>
- <a href="topicals.html"><b>Structure</b></a>
</div>
</table>

<h1 align=center>QFile Class Reference</h1><br clear="all">
<p>
The QFile class is an I/O device that operates on files.
<a href="#details">More...</a>
<p>
<code>#include &lt;<a href="qfile-h.html">qfile.h</a>&gt;</code>
<p>
Inherits <a href="qiodevice.html">QIODevice</a>.
<p><a href="qfile-members.html">List of all member functions.</a>
<h2>Public Members</h2>
<ul>
<li><div class="fn"><a href="#794522"><b>QFile</b></a> () </div>
<li><div class="fn"><a href="#9b8759"><b>QFile</b></a> ( const QString &amp; name ) </div>
<li><div class="fn"><a href="#1db985"><b>~QFile</b></a> () </div>
<li><div class="fn">QString <a href="#c6f89c"><b>name</b></a> () const</div>
<li><div class="fn">void <a href="#b1db15"><b>setName</b></a> ( const QString &amp; name ) </div>
<li><div class="fn">typedef <b>QCString</b> ( * EncoderFn )( const QString &amp; fileName) </div>
<li><div class="fn">typedef <b>QString</b> ( * DecoderFn )( const QCString &amp; localfileName) </div>
<li><div class="fn">bool <a href="#88f631"><b>exists</b></a> () const</div>
<li><div class="fn">bool <a href="#101734"><b>remove</b></a> () </div>
<li><div class="fn">virtual bool <a href="#44ae9b"><b>open</b></a> ( int ) </div>
<li><div class="fn">bool <a href="#cda4d4"><b>open</b></a> ( int, FILE * ) </div>
<li><div class="fn">bool <a href="#63c2a1"><b>open</b></a> ( int, int ) </div>
<li><div class="fn">virtual void <a href="#e37a87"><b>close</b></a> () </div>
<li><div class="fn">virtual void <a href="#b30306"><b>flush</b></a> () </div>
<li><div class="fn">virtual uint <a href="#b00ab0"><b>size</b></a> () const</div>
<li><div class="fn">virtual int <a href="#21433c"><b>at</b></a> () const</div>
<li><div class="fn">virtual bool <a href="#3e002a"><b>at</b></a> ( int ) </div>
<li><div class="fn">virtual bool <a href="#dcd9b8"><b>atEnd</b></a> () const</div>
<li><div class="fn">virtual int <a href="#aa76eb"><b>readBlock</b></a> ( char * data, uint len ) </div>
<li><div class="fn">virtual int <a href="#9285d1"><b>readLine</b></a> ( char * data, uint maxlen ) </div>
<li><div class="fn">int <a href="#065946"><b>readLine</b></a> ( QString &amp;, uint maxlen ) </div>
<li><div class="fn">virtual int <a href="#22a855"><b>getch</b></a> () </div>
<li><div class="fn">virtual int <a href="#6ec738"><b>putch</b></a> ( int ) </div>
<li><div class="fn">virtual int <a href="#41202f"><b>ungetch</b></a> ( int ) </div>
<li><div class="fn">int <a href="#80c7b0"><b>handle</b></a> () const</div>
</ul>
<h2>Static Public Members</h2>
<ul>
<li><div class="fn">QCString <a href="#997b97"><b>encodeName</b></a> ( const QString &amp; fileName ) </div>
<li><div class="fn">QString <a href="#66ed30"><b>decodeName</b></a> ( const QCString &amp; localFileName ) </div>
<li><div class="fn">void <a href="#00784f"><b>setEncodingFunction</b></a> ( EncoderFn ) </div>
<li><div class="fn">void <a href="#8d4bb7"><b>setDecodingFunction</b></a> ( DecoderFn ) </div>
<li><div class="fn">bool <a href="#8d9868"><b>exists</b></a> ( const QString &amp; fileName ) </div>
<li><div class="fn">bool <a href="#796efb"><b>remove</b></a> ( const QString &amp; fileName ) </div>
</ul>
<hr><h2><a name="details"></a>Detailed Description</h2>
The QFile class is an I/O device that operates on files.
<p>
QFile is an I/O device for reading and writing binary and text files. A
QFile may be used by itself (readBlock and writeBlock) or by more
conveniently using <a href="qdatastream.html">QDataStream</a> or <a href="qtextstream.html">QTextStream</a>.
<p>Here is a code fragment that uses QTextStream to read a text
file line by line. It prints each line with a line number.
<pre>    <a href="qfile.html">QFile</a> f("file.txt");
    if ( f.<a href="#44ae9b">open</a>(IO_ReadOnly) ) {    // file opened successfully
        <a href="qtextstream.html">QTextStream</a> t( &amp;f );        // use a text stream
        <a href="qstring.html">QString</a> s;
        int n = 1;
        while ( !t.<a href="qtextstream.html#29d3b3">eof</a>() ) {        // until end of file...
            s = t.<a href="qtextstream.html#6a73a4">readLine</a>();       // line of text excluding '\n'
            printf( "%3d: %s\n", n++, (const char *)s );
        }
        f.<a href="#e37a87">close</a>();
    }
</pre>
<p>The <a href="qfileinfo.html">QFileInfo</a> class holds detailed information about a file, such as
access permissions, file dates and file types.
<p>The <a href="qdir.html">QDir</a> class manages directories and lists of file names.
<p>See also  <a href="qdatastream.html">QDataStream</a> and <a href="qtextstream.html">QTextStream</a>.
<p>Examples:
 <a href="xml-tagreader-tagreader-cpp.html#QFile">xml/tagreader/tagreader.cpp</a>
 <a href="xml-tagreader-with-features-tagreader-cpp.html#QFile">xml/tagreader-with-features/tagreader.cpp</a>

<hr><h2>Member Function Documentation</h2>
<h3 class="fn"><a name="794522"></a>QFile::QFile ()</h3>
<p>Constructs a QFile with no name.
<h3 class="fn"><a name="9b8759"></a>QFile::QFile ( const <a href="qstring.html">QString</a> &amp; name )</h3>
<p>Constructs a QFile with a file name <em>name.</em>
<p>See also  <a href="#b1db15">setName</a>().
<h3 class="fn"><a name="1db985"></a>QFile::~QFile ()</h3>
<p>Destructs a QFile.  Calls <a href="#e37a87">close</a>().
<h3 class="fn">bool <a name="3e002a"></a>QFile::at ( int pos ) <code>[virtual]</code></h3>
<p>Sets the file index to <em>pos.</em> Returns TRUE if successful, otherwise FALSE.
<p>Example:
<pre>    <a href="qfile.html">QFile</a> f( "data.bin" );
    f.<a href="#44ae9b">open</a>( IO_ReadOnly );                      // index set to 0
    f.<a href="#21433c">at</a>( 100 );                                // set index to 100
    f.<a href="#21433c">at</a>( f.<a href="#21433c">at</a>()+50 );                          // set index to 150
    f.<a href="#21433c">at</a>( f.<a href="#b00ab0">size</a>()-80 );                        // set index to 80 before EOF
    f.<a href="#e37a87">close</a>();
</pre>
<p><b>Warning:</b> The result is undefined if the file was <a href="#44ae9b">opened</a>
using the <code>IO_Append</code> specifier.
<p>See also  <a href="#b00ab0">size</a>() and <a href="#44ae9b">open</a>().
<p>Reimplemented from <a href="qiodevice.html#2cc92b">QIODevice.</a>
<h3 class="fn">int <a name="21433c"></a>QFile::at () const <code>[virtual]</code></h3>
<p>Returns the file index.
<p>See also  <a href="#b00ab0">size</a>().
<p>Reimplemented from <a href="qiodevice.html#0a097f">QIODevice.</a>
<h3 class="fn">bool <a name="dcd9b8"></a>QFile::atEnd () const <code>[virtual]</code></h3>
<p>Returns TRUE if the end of file has been reached, otherwise FALSE.
<p>See also  <a href="#b00ab0">size</a>().
<p>Reimplemented from <a href="qiodevice.html#554767">QIODevice.</a>
<h3 class="fn">void <a name="e37a87"></a>QFile::close () <code>[virtual]</code></h3>
<p>Closes an open file.
<p>The file is not closed if it was opened with an existing file handle.
If the existing file handle is a <code>FILE*,</code> the file is flushed.
If the existing file handle is an <code>int</code> file descriptor, nothing
is done to the file.
<p>Some "write-behind" filesystems may report an unspecified error on
closing the file. These errors only indicate that something may
have gone wrong since the previous <a href="#44ae9b">open</a>(). In such a case <a href="qiodevice.html#157ea6">status</a>()
reports IO_UnspecifiedError after close(), otherwise IO_Ok.
<p>See also  <a href="#44ae9b">open</a>() and <a href="#b30306">flush</a>().
<p>Reimplemented from <a href="qiodevice.html#2e20a6">QIODevice.</a>
<h3 class="fn"><a href="qstring.html">QString</a> <a name="66ed30"></a>QFile::decodeName ( const <a href="qcstring.html">QCString</a> &amp; localFileName ) <code>[static]</code></h3>
<p>This does the reverse of <a href="#997b97">QFile::encodeName</a>().
<p>See also  <a href="#8d4bb7">setDecodingFunction</a>().
<h3 class="fn"><a href="qcstring.html">QCString</a> <a name="997b97"></a>QFile::encodeName ( const <a href="qstring.html">QString</a> &amp; fileName ) <code>[static]</code></h3>
<p>When you use QFile, <a href="qfileinfo.html">QFileInfo</a>, and <a href="qdir.html">QDir</a> to access the filesystem
with Qt, you can use Unicode filenames.  On Unix, these filenames
are converted to an 8-bit encoding.  If you want to do your own
file I/O on Unix, you should convert the filename using this
function.  On Windows NT, Unicode filenames are supported directly
in the filesystem and this function should be avoided. On Windows 95,
non-Latin1 locales are not supported at this time.
<p>By default, this function converts to the local 8-bit encoding
determined by the user's locale.  This is sufficient for
filenames that the user chooses.  Filenames hard-coded into the
application should only use 7-bit ASCII filename characters.
<p>The conversion scheme can be changed using <a href="#00784f">setEncodingFunction</a>().
This might be useful if you wish to give the user an option to
store in filenames in UTF-8, etc., but beware that such filenames
would probably then be unrecognizable when seen by other programs.
<p>See also  <a href="#66ed30">decodeName</a>().
<h3 class="fn">bool <a name="88f631"></a>QFile::exists () const</h3>
<p>Returns TRUE if this file exists, otherwise FALSE.
<p>See also  <a href="#c6f89c">name</a>().
<h3 class="fn">bool <a name="8d9868"></a>QFile::exists ( const <a href="qstring.html">QString</a> &amp; fileName ) <code>[static]</code></h3>
<p>Returns TRUE if the file given by <em>fileName</em> exists, otherwise FALSE.
<h3 class="fn">void <a name="b30306"></a>QFile::flush () <code>[virtual]</code></h3>
<p>Flushes the file buffer to the disk.
<p><a href="#e37a87">close</a>() also flushes the file buffer.
<p>Reimplemented from <a href="qiodevice.html#e99637">QIODevice.</a>
<h3 class="fn">int <a name="22a855"></a>QFile::getch () <code>[virtual]</code></h3>
<p>Reads a single byte/character from the file.
<p>Returns the byte/character read, or -1 if the end of the file has been
reached.
<p>See also  <a href="#6ec738">putch</a>() and <a href="#41202f">ungetch</a>().
<p>Reimplemented from <a href="qiodevice.html#c20352">QIODevice.</a>
<h3 class="fn">int <a name="80c7b0"></a>QFile::handle () const</h3>
<p>Returns the file handle of the file.
<p>This is a small positive integer, suitable for use with C library
functions such as fdopen() and fcntl(), as well as with <a href="qsocketnotifier.html">QSocketNotifier</a>.
<p>If the file is not open or there is an error, handle() returns -1.
<p>See also  <a href="qsocketnotifier.html">QSocketNotifier</a>.
<h3 class="fn"><a href="qstring.html">QString</a> <a name="c6f89c"></a>QFile::name () const</h3>
<p>Returns the name set by <a href="#b1db15">setName</a>().
<p>See also  <a href="#b1db15">setName</a>() and <a href="qfileinfo.html#350e44">QFileInfo::fileName</a>().
<h3 class="fn">bool <a name="44ae9b"></a>QFile::open ( int m ) <code>[virtual]</code></h3>
<p>Opens the file specified by the file name currently set, using the mode <em>m.</em>
Returns TRUE if successful, otherwise FALSE.
<p>The mode parameter <em>m</em> must be a combination of the following flags:
<ul>
<li><code>IO_Raw</code> specified raw (non-buffered) file access.
<li><code>IO_ReadOnly</code> opens the file in read-only mode.
<li><code>IO_WriteOnly</code> opens the file in write-only mode (and truncates).
<li><code>IO_ReadWrite</code> opens the file in read/write mode, equivalent to
<code>(IO_ReadOnly|IO_WriteOnly).</code>
<li><code>IO_Append</code> opens the file in append mode. This mode is very useful
when you want to write something to a log file. The file index is set to
the end of the file. Note that the result is undefined if you position the
file index manually using <a href="#21433c">at</a>() in append mode.
<li><code>IO_Truncate</code> truncates the file.
<li><code>IO_Translate</code> enables carriage returns and linefeed translation
for text files under MS-DOS, Windows and OS/2.
</ul>
<p>The raw access mode is best when I/O is block-operated using 4kB block size
or greater. Buffered access works better when reading small portions of
data at a time.
<p><strong>Important:</strong> When working with buffered files, data may
not be written to the file at once. Call <a href="#b30306">flush</a>
to make sure the data is really written.<p><b>Warning:</b> We have experienced problems with some C libraries when a buffered
file is opened for both reading and writing. If a read operation takes place
immediately after a write operation, the read buffer contains garbage data.
Worse, the same garbage is written to the file. Calling <a href="#b30306">flush</a>() before
<a href="#aa76eb">readBlock</a>() solved this problem.
<p>If the file does not exist and <code>IO_WriteOnly</code> or <code>IO_ReadWrite</code> is
specified, it is created.
<p>Example:
<pre>    <a href="qfile.html">QFile</a> f1( "/tmp/data.bin" );
    <a href="qfile.html">QFile</a> f2( "readme.txt" );
    f1.<a href="#44ae9b">open</a>( IO_Raw | IO_ReadWrite | IO_Append );
    f2.<a href="#44ae9b">open</a>( IO_ReadOnly | IO_Translate );
</pre>
<p>See also  <a href="#c6f89c">name</a>(), <a href="#e37a87">close</a>(), <a href="qiodevice.html#6e261a">isOpen</a>() and <a href="#b30306">flush</a>().
<p>Reimplemented from <a href="qiodevice.html#815d1e">QIODevice.</a>
<h3 class="fn">bool <a name="cda4d4"></a>QFile::open ( int m, FILE * f )</h3>
<p>Opens a file in the mode <em>m</em> using an existing file handle <em>f.</em>
Returns TRUE if successful, otherwise FALSE.
<p>Example:
<pre>    #include &lt;stdio.h&gt;

    void printError( const char* msg )
    {
        <a href="qfile.html">QFile</a> f;
        f.<a href="#44ae9b">open</a>( IO_WriteOnly, stderr );
        f.<a href="#cf169a">writeBlock</a>( msg, qstrlen(msg) );      // write to stderr
        f.<a href="#e37a87">close</a>();
    }
</pre>
<p>When a QFile is opened using this function, <a href="#e37a87">close</a>() does not actually
close the file, only flushes it.<p><b>Warning:</b> If <em>f</em> is <code>stdin, stdout, stderr,</code> you may not
be able to seek.  See <a href="qiodevice.html#48b344">QIODevice::isSequentialAccess</a>() for more
information.
<p>See also  <a href="#e37a87">close</a>().
<h3 class="fn">bool <a name="63c2a1"></a>QFile::open ( int m, int f )</h3>
<p>Opens a file in the mode <em>m</em> using an existing file descriptor <em>f.</em>
Returns TRUE if successful, otherwise FALSE.
<p>When a QFile is opened using this function, <a href="#e37a87">close</a>() does not actually
close the file.<p><b>Warning:</b> If <em>f</em> is one of 0 (stdin), 1 (stdout) or 2 (stderr), you may not
be able to seek. <a href="#b00ab0">size</a>() is set to <code>INT_MAX</code> (in limits.h).
<p>See also  <a href="#e37a87">close</a>().
<h3 class="fn">int <a name="6ec738"></a>QFile::putch ( int ch ) <code>[virtual]</code></h3>
<p>Writes the character <em>ch</em> to the file.
<p>Returns <em>ch,</em> or -1 if some error occurred.
<p>See also  <a href="#22a855">getch</a>() and <a href="#41202f">ungetch</a>().
<p>Reimplemented from <a href="qiodevice.html#49e172">QIODevice.</a>
<h3 class="fn">int <a name="aa76eb"></a>QFile::readBlock ( char * p, uint len ) <code>[virtual]</code></h3>
<p>Reads at most <em>len</em> bytes from the file into <em>p</em> and returns the
number of bytes actually read.
<p>Returns -1 if a serious error occurred.<p><b>Warning:</b> We have experienced problems with some C libraries when a buffered
file is opened for both reading and writing. If a read operation takes place
immediately after a write operation, the read buffer contains garbage data.
Worse, the same garbage is written to the file. Calling <a href="#b30306">flush</a>() before
readBlock() solved this problem.
<p>See also  <a href="#cf169a">writeBlock</a>().
<p>Reimplemented from <a href="qiodevice.html#01ed23">QIODevice.</a>
<h3 class="fn">int <a name="065946"></a>QFile::readLine ( <a href="qstring.html">QString</a> &amp; s, uint maxlen )</h3>
<p>Reads a line of text.
<p>Reads bytes from the file until end-of-line is reached, or up to <em>maxlen</em> bytes, and returns the number of bytes read, or -1 in case of
error.  The terminating newline is not stripped.
<p>This function is efficient only for buffered files.  Avoid
readLine() for files that have been opened with the <code>IO_Raw</code>
flag.
<p>Note that the string is read as plain Latin1 bytes, not Unicode.
<p>See also  <a href="#aa76eb">readBlock</a>() and <a href="qtextstream.html#6a73a4">QTextStream::readLine</a>().
<h3 class="fn">int <a name="9285d1"></a>QFile::readLine ( char * p, uint maxlen ) <code>[virtual]</code></h3>
<p>Reads a line of text.
<p>Reads bytes from the file until end-of-line is reached, or up to <em>maxlen</em> bytes, and returns the number of bytes read, or -1 in case of
error.  The terminating newline is not stripped.
<p>This function is efficient only for buffered files.  Avoid
<a href="#065946">readLine</a>() for files that have been opened with the <code>IO_Raw</code>
flag.
<p>See also  <a href="#aa76eb">readBlock</a>() and <a href="qtextstream.html#6a73a4">QTextStream::readLine</a>().
<p>Reimplemented from <a href="qiodevice.html#a84cbb">QIODevice.</a>
<h3 class="fn">bool <a name="101734"></a>QFile::remove ()</h3>
<p>Removes the file specified by the file name currently set.
Returns TRUE if successful, otherwise FALSE.
<p>The file is closed before it is removed.
<h3 class="fn">bool <a name="796efb"></a>QFile::remove ( const <a href="qstring.html">QString</a> &amp; fileName ) <code>[static]</code></h3>
<p>Removes the file <em>fileName.</em>
Returns TRUE if successful, otherwise FALSE.
<h3 class="fn">void <a name="8d4bb7"></a>QFile::setDecodingFunction ( <a href="qfile.html#DecoderFn">DecoderFn</a> f ) <code>[static]</code></h3>
<p>Sets the function for decoding 8-bit filenames.
The default uses the locale-specific 8-bit encoding.
<p>See also  <a href="#997b97">encodeName</a>() and <a href="#66ed30">decodeName</a>().
<h3 class="fn">void <a name="00784f"></a>QFile::setEncodingFunction ( <a href="qfile.html#EncoderFn">EncoderFn</a> f ) <code>[static]</code></h3>
<p>Sets the function for encoding Unicode filenames.
The default encodes in the locale-specific 8-bit encoding.
<p>See also  <a href="#997b97">encodeName</a>().
<h3 class="fn">void <a name="b1db15"></a>QFile::setName ( const <a href="qstring.html">QString</a> &amp; name )</h3>
<p>Sets the name of the file. The name can include an absolute directory
path or it can be a name or a path relative to the current directory.
<p>Do not call this function if the file has already been opened.
<p>Note that if the name is relative QFile does not associate it with the
current directory.  If you change directory before calling <a href="#44ae9b">open</a>(), open
uses the new current directory.
<p>Example:
<pre>     <a href="qfile.html">QFile</a> f;
     <a href="qdir.html#ddcd48">QDir::setCurrent</a>( "/tmp" );
     f.<a href="#b1db15">setName</a>( "readme.txt" );
     <a href="qdir.html#ddcd48">QDir::setCurrent</a>( "/home" );
     f.<a href="#44ae9b">open</a>( IO_ReadOnly );        // opens "/home/readme.txt" under UNIX
</pre>
<p>Also note that the directory separator '/' works for all operating
systems supported by Qt.
<p>See also  <a href="#c6f89c">name</a>(), <a href="qfileinfo.html">QFileInfo</a> and <a href="qdir.html">QDir</a>.
<h3 class="fn">uint <a name="b00ab0"></a>QFile::size () const <code>[virtual]</code></h3>
<p>Returns the file size.
<p>See also  <a href="#21433c">at</a>().
<p>Reimplemented from <a href="qiodevice.html#e7aea5">QIODevice.</a>
<h3 class="fn">int <a name="41202f"></a>QFile::ungetch ( int ch ) <code>[virtual]</code></h3>
<p>Puts the character <em>ch</em> back into the file and decrements the index if it
is not zero.
<p>This function is normally called to "undo" a <a href="#22a855">getch</a>() operation.
<p>Returns <em>ch,</em> or -1 if some error occurred.
<p>See also  <a href="#22a855">getch</a>() and <a href="#6ec738">putch</a>().
<p>Reimplemented from <a href="qiodevice.html#09ed27">QIODevice.</a>
<h3 class="fn">int <a name="f19465"></a>QFile::writeBlock ( const <a href="qbytearray.html">QByteArray</a> &amp; data )</h3>
<p>Reimplemented for internal reasons; the API is not affected.
<h3 class="fn">int <a name="cf169a"></a>QFile::writeBlock ( const char * p, uint len ) <code>[virtual]</code></h3>
<p>Reimplemented for internal reasons; the API is not affected.
<p>Writes <em>len</em> bytes from <em>p</em> to the file and returns the number of
bytes actually written.
<p>Returns -1 if a serious error occurred.<p><b>Warning:</b> When working with buffered files, data may not be written
to the file at once. Call <a href="#b30306">flush</a>() to make sure the data is really
written.
<p>See also  <a href="#aa76eb">readBlock</a>().
<p>Reimplemented from <a href="qiodevice.html#6cc265">QIODevice.</a>
<hr><p>
Search the documentation, FAQ, qt-interest archive and more (uses
<a href="http://www.trolltech.com">www.trolltech.com</a>):<br>
<form method=post action="http://www.trolltech.com/search.cgi">
<input type=hidden name="version" value="2.3.1"><nobr>
<input size="50" name="search"><input type=submit value="Search">
</nobr></form><hr><p>
This file is part of the <a href="index.html">Qt toolkit</a>,
copyright &copy; 1995-2000
<a href="http://www.trolltech.com">Trolltech</a>, all rights reserved.<p><address><hr><div align="center">
<table width="100%" cellspacing="0" border="0"><tr>
<td>Copyright © 2000 Trolltech<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align="right"><div align="right">Qt version 2.3.1</div>
</table></div></address></body></html>
