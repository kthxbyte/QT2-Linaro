<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Qt Toolkit - QWMatrix Class</title><style type="text/css"><!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }body { background: white; color: black; }
--></style>
</head><body bgcolor="#ffffff">

<table width="100%">
<tr><td><a href="index.html">
<img width="100" height="100" src="qtlogo.png"
alt="Home" border="0"><img width="100"
height="100" src="face.png" alt="Home" border="0">
</a><td valign=top><div align=right><img src="dochead.png" width="472" height="27"><br>
<a href="classes.html"><b>Classes</b></a>
- <a href="annotated.html">Annotated</a>
- <a href="hierarchy.html">Tree</a>
- <a href="functions.html">Functions</a>
- <a href="index.html">Home</a>
- <a href="topicals.html"><b>Structure</b></a>
</div>
</table>

<h1 align=center>QWMatrix Class Reference</h1><br clear="all">
<p>
The QWMatrix class specifies 2D transformations of a coordinate system.
<a href="#details">More...</a>
<p>
<code>#include &lt;<a href="qwmatrix-h.html">qwmatrix.h</a>&gt;</code>
<p><a href="qwmatrix-members.html">List of all member functions.</a>
<h2>Public Members</h2>
<ul>
<li><div class="fn"><a href="#a6366a"><b>QWMatrix</b></a> () </div>
<li><div class="fn"><a href="#a56fd8"><b>QWMatrix</b></a> ( double m11, double m12, double m21, double m22, double dx, double dy ) </div>
<li><div class="fn">void <a href="#e2d0bb"><b>setMatrix</b></a> ( double m11, double m12, double m21, double m22, double dx, double dy ) </div>
<li><div class="fn">double <a href="#4d9dbb"><b>m11</b></a> () const</div>
<li><div class="fn">double <a href="#696920"><b>m12</b></a> () const</div>
<li><div class="fn">double <a href="#695ba9"><b>m21</b></a> () const</div>
<li><div class="fn">double <a href="#0171e3"><b>m22</b></a> () const</div>
<li><div class="fn">double <a href="#ed3070"><b>dx</b></a> () const</div>
<li><div class="fn">double <a href="#9ef178"><b>dy</b></a> () const</div>
<li><div class="fn">void <a href="#406a7d"><b>map</b></a> ( int x, int y, int * tx, int * ty ) const</div>
<li><div class="fn">void <a href="#e3198c"><b>map</b></a> ( double x, double y, double * tx, double * ty ) const</div>
<li><div class="fn">QPoint <a href="#d53eea"><b>map</b></a> ( const QPoint &amp; ) const</div>
<li><div class="fn">QRect <a href="#839283"><b>map</b></a> ( const QRect &amp; ) const</div>
<li><div class="fn">QPointArray <a href="#38577f"><b>map</b></a> ( const QPointArray &amp; ) const</div>
<li><div class="fn">void <a href="#dc144e"><b>reset</b></a> () </div>
<li><div class="fn">QWMatrix&amp; <a href="#226fc6"><b>translate</b></a> ( double dx, double dy ) </div>
<li><div class="fn">QWMatrix&amp; <a href="#a5e455"><b>scale</b></a> ( double sx, double sy ) </div>
<li><div class="fn">QWMatrix&amp; <a href="#8eb34f"><b>shear</b></a> ( double sh, double sv ) </div>
<li><div class="fn">QWMatrix&amp; <a href="#84df75"><b>rotate</b></a> ( double a ) </div>
<li><div class="fn">QWMatrix <a href="#6e15e2"><b>invert</b></a> ( bool * = 0 ) const</div>
<li><div class="fn">bool <a href="#bb1b31"><b>operator==</b></a> ( const QWMatrix &amp; ) const</div>
<li><div class="fn">bool <a href="#aaac4d"><b>operator!=</b></a> ( const QWMatrix &amp; ) const</div>
<li><div class="fn">QWMatrix&amp; <a href="#83a3be"><b>operator*=</b></a> ( const QWMatrix &amp; ) </div>
</ul>
<h2>Related Functions</h2>
(Note that these are not member functions.)
<ul>
<li>QWMatrix <a href="qwmatrix.html#b07a77"><b>operator*</b></a> (const QWMatrix &amp; m1, const QWMatrix &amp; m2)
<li>QDataStream &amp; <a href="qwmatrix.html#c35c56"><b>operator&lt;&lt;</b></a> (QDataStream &amp; s, const QWMatrix &amp; m)
<li>QDataStream &amp; <a href="qwmatrix.html#fef12c"><b>operator&gt;&gt;</b></a> (QDataStream &amp; s, QWMatrix &amp; m)
</ul>
<hr><h2><a name="details"></a>Detailed Description</h2>
The QWMatrix class specifies 2D transformations of a coordinate system.
<p>
The standard coordinate system of a <a href="qpaintdevice.html">paint
device</a> has the origin located at the top left position. X
values increase to the right, and Y values increase downwards.
<p>This coordinate system is default for the <a href="qpainter.html">QPainter</a>, which renders
graphics in a paint device. A user-defined coordinate system can be
specified by setting a QWMatrix for the painter.
<p>Example:
<pre>    MyWidget::paintEvent( <a href="qpaintevent.html">QPaintEvent</a> * )
    {
      <a href="qpainter.html">QPainter</a> p;                       // our painter
      <a href="qwmatrix.html">QWMatrix</a> m;                       // our transformation matrix
      m.<a href="#84df75">rotate</a>( 22.5 );                 // rotated coordinate system
      p.<a href="qpainter.html#59f1bb">begin</a>( this );                  // start painting
      p.<a href="qpainter.html#f4a354">setWorldMatrix</a>( m );            // use rotated coordinate system
      p.<a href="qpainter.html#8a59ed">drawText</a>( 30,20, "detator" );   // draw rotated text at 30,20
      p.<a href="qpainter.html#c7f9ac">end</a>();                          // painting done
    }
</pre>
<p>A matrix specifies how to translate, scale, shear or rotate the
graphics, and the actual transformation is performed by the drawing
routines in QPainter and by <a href="qpixmap.html#3b77c0">QPixmap::xForm</a>().
<p>The QWMatrix class contains a 3*3 matrix of the form:
<pre>
    m11  m12  0
    m21  m22  0
    dx   dy   1
  </pre>
<p>A matrix transforms a point in the plane to another point:
<pre>    x' = m11*x + m21*y + dx
    y' = m22*y + m12*x + dy
</pre>
<p>The point <em>(x,y)</em> is the original point, and <em>(x',y')</em> is the
transformed point.  <em>(x',y')</em> can be transformed back to <em>(x,y)</em>
by performing the same operation on the <a href="#6e15e2">inverted matrix</a>.
<p>The elements <em>dx</em> and <em>dy</em> specify horisontal and vertical
translation.  The elements <em>m11</em> and <em>m22</em> specify horisontal and
vertical scaling.  The elements <em>m12</em> and <em>m21</em> specify horisontal
and vertical shearing.
<p>The identity matrix has <em>m11</em> and <em>m22</em> set to 1, all others set
to 0.  This matrix maps a point to itself.
<p>Translation is the simplest transformation. Setting <em>dx</em> and <em>dy</em>
will move the coordinate system <em>dx</em> units along the X axis and <em>dy</em> units along the Y axis.
<p>Scaling can be done by setting <em>m11</em> and <em>m22.</em>  For example,
setting <em>m11</em> to 2 and <em>m22</em> to 1.5 will double the height and
increase the width by 50%.
<p>Shearing is controlled by <em>m12</em> and <em>m21.</em> Setting these elements
to values different from zero will twist the coordinate system.
<p>Rotation is achieved by carefully setting both the shearing factors
and the scaling factors.  The QWMatrix has a function that sets
<a href="#84df75">rotation</a> directly.
<p>QWMatrix lets you combine transformations like this:
<pre>    <a href="qwmatrix.html">QWMatrix</a> m;                                 // identity matrix
    m.<a href="#226fc6">translate</a>(10, -20);                       // first translate (10,-20)
    m.<a href="#84df75">rotate</a>(25);                               // then rotate 25 degrees
    m.<a href="#a5e455">scale</a>(1.2, 0.7);                          // finally scale it
</pre>
<p>The same example, but using basic matrix operations:
<pre>    double a    = pi/180 * 25;                  // convert 25 to radians
    double sina = sin(a);
    double cosa = cos(a);
    <a href="qwmatrix.html">QWMatrix</a> m1(0, 0, 0, 0, 10, -20);           // translation matrix
    <a href="qwmatrix.html">QWMatrix</a> m2( cosa, sina,                    // rotation matrix
                -sina, cosa, 0, 0 );
    <a href="qwmatrix.html">QWMatrix</a> m3(1.2, 0, 0, 0.7, 0, 0);          // scaling matrix
    <a href="qwmatrix.html">QWMatrix</a> m;
    m = m3 * m2 * m1;                           // combine all transformations
</pre>
<p><a href="qpainter.html">QPainter</a> has functions that <a href="qpainter.html#ba64b6">translate</a>, <a href="qpainter.html#fc599c">scale</a>, <a href="qpainter.html#a3ef1f">shear</a> and <a href="qpainter.html#4bd0fb">rotate</a> the coordinate system without using a
QWMatrix.  These functions are very convenient, however, if you want to
perform more than a single transform operation, it is more efficient to
build a QWMatrix and call <a href="qpainter.html#f4a354">QPainter::setWorldMatrix</a>().
<p>See also  <a href="qpainter.html#f4a354">QPainter::setWorldMatrix</a>() and <a href="qpixmap.html#3b77c0">QPixmap::xForm</a>().
<p>Examples:
 <a href="qtimage-qtimage-cpp.html#QWMatrix">qtimage/qtimage.cpp</a>
 <a href="xform-xform-cpp.html#QWMatrix">xform/xform.cpp</a>
 <a href="drawdemo-drawdemo-cpp.html#QWMatrix">drawdemo/drawdemo.cpp</a>
 <a href="qmag-qmag-cpp.html#QWMatrix">qmag/qmag.cpp</a>
 <a href="desktop-desktop-cpp.html#QWMatrix">desktop/desktop.cpp</a>
 <a href="movies-main-cpp.html#QWMatrix">movies/main.cpp</a>

<hr><h2>Member Function Documentation</h2>
<h3 class="fn"><a name="a6366a"></a>QWMatrix::QWMatrix ()</h3>
<p>Constructs an identity matrix.  All elements are set to zero,
except <em>m11</em> and <em>m22</em> (scaling) which are set to 1.
<h3 class="fn"><a name="a56fd8"></a>QWMatrix::QWMatrix ( double m11, double m12, double m21, double m22, double dx, double dy )</h3>
<p>Constructs a matrix with the specified elements.
<h3 class="fn">double <a name="ed3070"></a>QWMatrix::dx () const</h3>
<p>Returns the horizontal translation.
<h3 class="fn">double <a name="9ef178"></a>QWMatrix::dy () const</h3>
<p>Returns the vertical translation.
<h3 class="fn">QWMatrix <a name="6e15e2"></a>QWMatrix::invert ( bool * invertible = 0 ) const</h3>
<p>Returns the inverted matrix.
<p>If the matrix is singular (not invertible), then the identity matrix is
returned.
<p>If <em>*invertible</em> is not null, then the value of <em>*invertible</em> will
be set to TRUE or FALSE to tell if the matrix is invertible or not.
<h3 class="fn">double <a name="4d9dbb"></a>QWMatrix::m11 () const</h3>
<p>Returns the X scaling factor.
<h3 class="fn">double <a name="696920"></a>QWMatrix::m12 () const</h3>
<p>Returns the vertical shearing factor.
<h3 class="fn">double <a name="695ba9"></a>QWMatrix::m21 () const</h3>
<p>Returns the horizontal shearing factor.
<h3 class="fn">double <a name="0171e3"></a>QWMatrix::m22 () const</h3>
<p>Returns the Y scaling factor.
<h3 class="fn"><a href="qpoint.html">QPoint</a> <a name="d53eea"></a>QWMatrix::map ( const <a href="qpoint.html">QPoint</a> &amp; p ) const</h3>
<p>Returns the transformed <em>p.</em>
<h3 class="fn"><a href="qpointarray.html">QPointArray</a> <a name="38577f"></a>QWMatrix::map ( const <a href="qpointarray.html">QPointArray</a> &amp; a ) const</h3>
<p>Returns the point array <em>a</em> transformed by calling map for each point.
<p>Examples:
 <a href="xform-xform-cpp.html#map">xform/xform.cpp</a>
<h3 class="fn"><a href="qrect.html">QRect</a> <a name="839283"></a>QWMatrix::map ( const <a href="qrect.html">QRect</a> &amp; r ) const</h3>
<p>Returns the transformed rectangle <em>r.</em>
<p>If rotation or shearing has been specified, then the bounding rectangle
will be returned.
<h3 class="fn">void <a name="e3198c"></a>QWMatrix::map ( double x, double y, double * tx, double * ty ) const</h3>
<p>Transforms <em>(x,y)</em> to <em>(*tx,*ty),</em> using the formulae:
<p><pre>    *tx = m11*x + m21*y + dx
    *ty = m22*y + m12*x + dy
</pre>
<h3 class="fn">void <a name="406a7d"></a>QWMatrix::map ( int x, int y, int * tx, int * ty ) const</h3>
<p>Transforms <em>(x,y)</em> to <em>(*tx,*ty),</em> using the formulae:
<p><pre>    *tx = m11*x + m21*y + dx  --  (rounded to the nearest integer)
    *ty = m22*y + m12*x + dy  --  (rounded to the nearest integer)
</pre>
<h3 class="fn">bool <a name="aaac4d"></a>QWMatrix::operator!= ( const QWMatrix &amp; m ) const</h3>
<p>Returns TRUE if this matrix is not equal to <em>m.</em>
<h3 class="fn">QWMatrix &amp; <a name="83a3be"></a>QWMatrix::operator*= ( const QWMatrix &amp; m )</h3>
<p>Returns the result of multiplying this matrix with <em>m.</em>
<h3 class="fn">bool <a name="bb1b31"></a>QWMatrix::operator== ( const QWMatrix &amp; m ) const</h3>
<p>Returns TRUE if this matrix is equal to <em>m.</em>
<h3 class="fn">void <a name="dc144e"></a>QWMatrix::reset ()</h3>
<p>Resets the matrix to an identity matrix.
<p>All elements are set to zero, except <em>m11</em> and <em>m22</em> (scaling)
that are set to 1.
<h3 class="fn">QWMatrix &amp; <a name="84df75"></a>QWMatrix::rotate ( double a )</h3>
<p>Rotates the coordinate system <em>a</em> degrees counterclockwise.
<p>Returns a reference to the matrix.
<p>See also  <a href="#226fc6">translate</a>(), <a href="#a5e455">scale</a>() and <a href="#8eb34f">shear</a>().
<p>Examples:
 <a href="xform-xform-cpp.html#rotate">xform/xform.cpp</a>
 <a href="drawdemo-drawdemo-cpp.html#rotate">drawdemo/drawdemo.cpp</a>
 <a href="desktop-desktop-cpp.html#rotate">desktop/desktop.cpp</a>
<h3 class="fn">QWMatrix &amp; <a name="a5e455"></a>QWMatrix::scale ( double sx, double sy )</h3>
<p>Scales the coordinate system unit by <em>sx</em> horizontally and <em>sy</em>
vertically.
<p>Returns a reference to the matrix.
<p>See also  <a href="#226fc6">translate</a>(), <a href="#8eb34f">shear</a>() and <a href="#84df75">rotate</a>().
<p>Examples:
 <a href="qtimage-qtimage-cpp.html#scale">qtimage/qtimage.cpp</a>
 <a href="xform-xform-cpp.html#scale">xform/xform.cpp</a>
 <a href="movies-main-cpp.html#scale">movies/main.cpp</a>
<h3 class="fn">void <a name="e2d0bb"></a>QWMatrix::setMatrix ( double m11, double m12, double m21, double m22, double dx, double dy )</h3>
<p>Sets the matrix elements to the specified values.
<h3 class="fn">QWMatrix &amp; <a name="8eb34f"></a>QWMatrix::shear ( double sh, double sv )</h3>
<p>Shears the coordinate system  by <em>sh</em> horizontally and <em>sv</em> vertically.
<p>Returns a reference to the matrix.
<p>See also  <a href="#226fc6">translate</a>(), <a href="#a5e455">scale</a>() and <a href="#84df75">rotate</a>().
<p>Examples:
 <a href="xform-xform-cpp.html#shear">xform/xform.cpp</a>
 <a href="drawdemo-drawdemo-cpp.html#shear">drawdemo/drawdemo.cpp</a>
<h3 class="fn">QWMatrix &amp; <a name="226fc6"></a>QWMatrix::translate ( double dx, double dy )</h3>
<p>Moves the coordinate system <em>dx</em> along the X-axis and <em>dy</em>
along the Y-axis.
<p>Returns a reference to the matrix.
<p>See also  <a href="#a5e455">scale</a>(), <a href="#8eb34f">shear</a>() and <a href="#84df75">rotate</a>().
<p>Examples:
 <a href="xform-xform-cpp.html#translate">xform/xform.cpp</a>
 <a href="drawdemo-drawdemo-cpp.html#translate">drawdemo/drawdemo.cpp</a>
<hr><h2>Related Functions</h2>
<h3>QWMatrix <a name="b07a77"></a>operator* (const QWMatrix &amp; m1, const QWMatrix &amp; m2)</h3>
<p>Returns the product <em>m1</em> * <em>m2.</em>
<p>Remember that matrix multiplication is not commutative, thus
a*b != b*a.

<h3><a href="qdatastream.html">QDataStream</a> &amp; <a name="c35c56"></a>operator&lt;&lt; (<a href="qdatastream.html">QDataStream</a> &amp; s, const QWMatrix &amp; m)</h3>
<p>Writes a matrix to the stream and returns a reference to the stream.
<p>See also  <a href="datastreamformat.html">Format of the QDataStream operators</a>

<h3><a href="qdatastream.html">QDataStream</a> &amp; <a name="fef12c"></a>operator&gt;&gt; (<a href="qdatastream.html">QDataStream</a> &amp; s, QWMatrix &amp; m)</h3>
<p>Reads a matrix from the stream and returns a reference to the stream.
<p>See also  <a href="datastreamformat.html">Format of the QDataStream operators</a>

<hr><p>
Search the documentation, FAQ, qt-interest archive and more (uses
<a href="http://www.trolltech.com">www.trolltech.com</a>):<br>
<form method=post action="http://www.trolltech.com/search.cgi">
<input type=hidden name="version" value="2.3.1"><nobr>
<input size="50" name="search"><input type=submit value="Search">
</nobr></form><hr><p>
This file is part of the <a href="index.html">Qt toolkit</a>,
copyright &copy; 1995-2000
<a href="http://www.trolltech.com">Trolltech</a>, all rights reserved.<p><address><hr><div align="center">
<table width="100%" cellspacing="0" border="0"><tr>
<td>Copyright © 2000 Trolltech<td><a href="http://www.trolltech.com/trademarks.html">Trademarks</a>
<td align="right"><div align="right">Qt version 2.3.1</div>
</table></div></address></body></html>
